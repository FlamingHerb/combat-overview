<!DOCTYPE html>
<html>
<head>
	<title>Combat Overview 1.3.2</title>
	<meta charset="utf-8">
	<meta name="description" content="A research program spearheaded by Center for Research in Science and Technology to document biodiversity in Eastern Visayas">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="favicon.ico" type="image/ico">
	 <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

	<!-- Scripts -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" integrity="sha384-1CmrxMRARb6aLqgBO7yyAxTOQE2AKb9GfXnEo760AUcUmFx3ibVJJAzGytlQcNXd" crossorigin="anonymous"></script>
	
	<!-- Modernizr -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>

 	<!-- Font Awesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/solid.min.js" integrity="sha256-UM1HRu0Wd16k4L5wgrk17BYWzKkjZSe0BYr5T5qw2Ww=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/fontawesome.min.js" integrity="sha256-NP9NujdEzS5m4ZxvNqkcbxyHB0dTRy9hG13RwTVBGwo=" crossorigin="anonymous"></script>


    <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
	<div class="container-fluid">
		<div class="row flex-xl-nowrap">

			<!--

			MODALS

			-->

			<!-- Add Player Modal -->
			<div class="modal fade" id="addPCModal" tabindex="-1" role="dialog" aria-labelledby="addPCModalLabel" aria-hidden="true">
			  <div class="modal-dialog modal-dialog-centered" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="exampleModalLabel">Add PC</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>

				      <div class="modal-body">

				      	<div class="input-group input-group-sm mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text" id="inputGroup-sizing-sm">Player Name</span>
							</div>
							<input id="playerName" name="playerName" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
						</div>
				      </div>

				      <div class="modal-footer">
				        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				        <button type="button" id="submitPlayer" name="submitPlayer" class="btn btn-primary" data-dismiss="modal">Add PC now</button>
				      </div>

			    </div>
			  </div>
			</div>

			<!-- Add Monster Modal -->
			<div class="modal fade" id="addMonsterModal" tabindex="-1" role="dialog" aria-labelledby="addMonsterModalLabel" aria-hidden="true">
			  <div class="modal-dialog modal-dialog-centered" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="exampleModalLabel">Add monster</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>

				      <div class="modal-body">
				      <table>
				      	<tr>
				      		<td>
				      			<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroup-sizing-sm">Monster Name</span>
								</div>
								
				      		</td>
				      		<td><input id="monsterName" name="monsterName" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm"></td>
				      	</tr>
				      	<tr>
				      		<td>
				      			<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroup-sizing-sm">Monster HP</span>
								</div>
								
				      		</td>
				      		<td><input id="monsterHP" name="monsterHP" type="number" min='1' class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" value="0"></td>
				      	</tr>
				      	<tr>
				      		<td>
				      			<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroup-sizing-sm">Monster MP</span>
								</div>
								
				      		</td>
				      		<td>
				      			<input id="monsterMP" name="monsterMP" type="number" min='1' class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" value="0">
				      		</td>
				      	</tr>
				      	<tr>
				      		<td>
				      			<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroup-sizing-sm">Number of Monsters</span>
								</div>
								
				      		</td>
				      		<td>
				      			<input id="monsterNumber" name="monsterNumber" type="number" min='1' class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" value="1">
				      		</td>
				      	</tr>
				      	<tr>
				      		<td>
				      			<div class="input-group-prepend">
									<span class="input-group-text" id="inputGroup-sizing-sm">Starting Monster Number</span>
								</div>
								
				      		</td>
				      		<td>
				      			<input id="monsterStartNumber" name="monsterStartNumber" type="number" min='1' class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" value="1">
				      		</td>
				      	</tr>
				      </table>
				      	<div class="input-group input-group-sm mb-3">
						</div>
				      
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				        <button type="button" id="submitMonster" name="submitMonster" class="btn btn-primary" data-dismiss="modal">Add monster now</button>
				      </div>

			    </div>
			  </div>
			</div>


			<!--

			SIDEBAR

			-->

			<nav id="sidebar" class="">
					<div class="sidebar-header">
						<img src="files/logo.webp" class="img-thumbnail rounded mx-auto d-block" alt="..." style="background-color: #6d7fcc; border: none;">
			            <h3>Combat Overview 1.3.2</h3>
			        </div>

			        <ul class="list-unstyled text-center">
			            <p>Options</p>
			            <hr>
			            <!--
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Create a new player (Unavailable for now!).">
			            		<button type="button" class="btn btn-info" >
				                	New PC
				                </button>
			            	</span>
			            </li>
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Create a new monster (Unavailable for now!).">
				                <button type="button" class="btn btn-info" >
				                	New Monster
				                </button>
				            </span>
			            </li>
			            <hr>
			        	-->
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Add existing player.">
				                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#addPCModal">
				                	Add PC
				                </button>
			            	</span>
			            </li>
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Add existing monster.">
				                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#addMonsterModal">
				                	Add Monster
				                </button>
			            	</span>
			            </li>
			            <!--
			            <hr>
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Edit existing player (Unavailable for now!).">
				                <button type="button" class="btn btn-info">
				                	Edit PC
				                </button>
			            	</span>
			            </li>
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Edit existing monster (Unavailable for now!).">
				                <button type="button" class="btn btn-info">
				                	Edit Monster
				                </button>
				            </span>
			            </li>
			        	-->
			            <hr>
			            <li>
			            	<span data-toggle="tooltip" data-placement="right" title="Update turns.">
				                <button type="button" class="btn btn-info" id="updateTurns">
				                	Update Turn
				                </button>
				            </span>
			            </li>
			            <hr>
			            <li>
			            	<p>This is a program made by VaccariaÂ® to cater the needs of immediate combat preparation. While removing JSON function, it does allow for more fluid stuff.</p>
			            </li>
			        </ul>
			</nav>

			<!--

			CARDS
			
			-->

			<div id="content">
			    <nav class="navbar navbar-expand-lg navbar-light">
			        <div class="container-fluid">

			            <button type="button" id="sidebarCollapse" class="btn btn-info">
			                <i class="fas fa-align-left"></i>
			                <span>Toggle Sidebar</span>
			            </button>

			        </div>
			    </nav>

			    <div class="container-fluid">

			    	<!--

					Show's the players side cards (speed only for nwo)

			    	-->
			    	<h1 class="text-center">Player's Side</h1>


			    	<!--

						<div class="col">
							<div class="card player">
							  <div class="card-body">
							    <h5 class="card-title">Player</h5>
							    <p class="card-text">Base Speed: 7</p>
							    <div class="input-group input-group-sm mb-3">
								  <div class="input-group-prepend">
								    <span class="input-group-text" id="inputGroup-sizing-sm">Rolled Speed</span>
								  </div>
								  <input type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
								</div>
							  </div>
							</div>
						</div>

			    	-->

			    	<!-- So that it floats and stacks -->
					<div class="row row-cols-5 justify-content-center" id="playerSide">
			    	</div>
			    </div>

			    <div class="container-fluid">

			    	<!--

					Show's the monsters side.

			    	-->
			    	<h1 class="text-center">Enemy's Side</h1>

			    	<div class="row row-cols-6 justify-content-center" id="enemySide">
			    	</div>
				</div>

				<div class="container-fluid">

			    	<!--

					Show's the monsters side.

			    	-->
			    	<h1 class="text-center">Turns</h1>

			    	<p id="turnShower" class="align-middle">

			    	</p>
				</div>
			</div>
		</div>
	</div>
</body>


<script type="text/javascript">

		// I don't know why I even added this function knowing that it doesn't matter anyway if the document gets loaded up.
		$(document).ready(function () {

		    $('#sidebarCollapse').on('click', function () {
		        $('#sidebar').toggleClass('active');
		    });
		});

		// This is to make sure that tooltips work! Too bad!
		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		});

		// Add players
		$("#submitPlayer").click(function() {
			if ($("#playerName").val() == ""){
				alert("You don't have a name for the player!");
			}
			else {
				$("#playerSide").append(

			  	" <div class='col' id='" + $("#playerName").val() + "player'> <div class='card player'> <div class='card-body'> <h5 class='card-title'>" + $("#playerName").val() + "</h5><div class='input-group input-group-sm mb-3'> <div class='input-group-prepend'> <span class='input-group-text' id='inputGroup-sizing-sm'>Rolled Speed</span> </div> <input name=':" + $("#playerName").val() + ":' type='number' class='form-control speed' aria-label='Small' aria-describedby='inputGroup-sizing-sm'> </div><hr> <button type='button' class='btn btn-danger btn-sm' id='deletebutton' value='" + $("#playerName").val() + "player'>Delete</button> <button type='button' class='btn btn-warning btn-sm' id='faintbutton' value='" + $("#playerName").val() + "player'>Faint</button> </div> </div> </div>"
			  	
			  	);
			  $("#playerName").val("");
			}
		  
		});

		// Ah yes, the saddest part. Making sure everything fits xd

		// Add monsters
		// 1.3.2 added iteratives
		$("#submitMonster").click(function() {
			if ($("#monsterName").val() == ""){
				alert("Insufficient data!");
			}
			else {
				var monstername = $("#monsterName").val().replace(/ /g,"_");
				console.log(monstername);
				var startingNumber = $("#monsterStartNumber").val(); // Starting Number
				if (parseInt($("#monsterNumber").val()) == 1) { // Checks if number of monsters are equal to 1
					$("#enemySide").append("<div class='col' id='" + monstername + "_" + startingNumber + "monster'><div class='card monster'><div class='card-body'><h5 class='card-title'>" + $("#monsterName").val() + " " + startingNumber + "</h5><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text hpMonster' id='inputGroup-sizing-sm'>HP</span></div><input name='hpMonster' type='number' class='form-control hpMonster' min='0' aria-label='Small' aria-describedby='inputGroup-sizing-sm' value='" + $("#monsterHP").val() + "_" + startingNumber + "'></div><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text mpMonster' id='inputGroup-sizing-sm'>MP</span></div><input name='mpMonster' type='number' class='form-control mpMonster' min='0' aria-label='Small' aria-describedby='inputGroup-sizing-sm' value='" + $("#monsterMP").val() + "_" + startingNumber + "'></div><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text' id='inputGroup-sizing-sm'>Rolled Speed</span></div><input name='" + monstername + "_" + startingNumber + "' type='number' min='0' class='form-control speed' aria-label='Small' aria-describedby='inputGroup-sizing-sm'></div><hr><button type='button' class='btn btn-danger btn-sm' id='deletebutton' value='" + monstername + "_" + startingNumber + "monster'>Delete</button><button type='button' class='btn btn-warning btn-sm' id='faintbutton' value='" + monstername + "_" + startingNumber + "monster'>Faint</button></div></div></div>");
				}
				else {
					var iterater = parseInt($("#monsterNumber").val()) + parseInt($("#monsterStartNumber").val()); // Iterator
					for (var itemNo = startingNumber; itemNo < iterater; itemNo++) {
						$("#enemySide").append("<div class='col' id='" + monstername + "_" + itemNo + "monster'><div class='card monster'><div class='card-body'><h5 class='card-title'>" + $("#monsterName").val() + " " + itemNo + "</h5><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text hpMonster' id='inputGroup-sizing-sm'>HP</span></div><input name='hpMonster' type='number' class='form-control hpMonster' min='0' aria-label='Small' aria-describedby='inputGroup-sizing-sm' value='" + $("#monsterHP").val() + "'></div><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text mpMonster' id='inputGroup-sizing-sm'>MP</span></div><input name='mpMonster' type='number' class='form-control mpMonster' min='0' aria-label='Small' aria-describedby='inputGroup-sizing-sm' value='" + $("#monsterMP").val() + "'></div><div class='input-group input-group-sm mb-3'><div class='input-group-prepend'><span class='input-group-text' id='inputGroup-sizing-sm'>Rolled Speed</span></div><input name='" + monstername + "_" + itemNo + "' type='number' min='0' class='form-control speed' aria-label='Small' aria-describedby='inputGroup-sizing-sm'></div><hr><button type='button' class='btn btn-danger btn-sm' id='deletebutton' value='" + monstername + "_" + itemNo + "monster'>Delete</button><button type='button' class='btn btn-warning btn-sm' id='faintbutton' value='" + monstername + "_" + itemNo + "monster'>Faint</button></div></div></div>");
					}	
				}
				
			  // Deinitializes the values for new input.
			  $("#monsterName").val("");
			  $("#monsterHP").val("0");
			  $("#monsterMP").val("0");
			  $("#monsterNumber").val("1");
			  $("#monsterStartNumber").val("1");
			}
		 
		});


		// Delete buttons
		$('body').on( "click", "#deletebutton" , function() {
			var text = "#" + $(this).val();
			console.log(text);
			$(text).remove();
		});

		// Faint buttons
		$('body').on( "click", "#faintbutton" , function() {
			var text = "#" + $(this).val();
			console.log(text)
			$(text).children('.card').toggleClass('dead');
			$(text).find('.speed').toggleClass('dead'); // Puts a... dead class on the input? Because for updating speeds? Yeah, I know.

		});


		// Update turns
		$("#updateTurns").click(function() {
			var turn = "";
			var array = new Array();
			var charaName = "";
			var charaSpeed = 0;
			var iteration = 0;

			$(".speed").each(function() {

				// The reason that this checks whether the input has a .dead class is because I made the .speed each function first. Too bad!
				if ($(this).hasClass('dead') || $(this).val() == "") {
					return;
				}
				charaName = $(this).attr('name');
				charaName = charaName.replace(/_/g, " ");
				charaSpeed = $(this).val();
				array[iteration] = new Array(charaName, charaSpeed);
				iteration++;
				console.log($(this).parents());
			});

			array.sort(function(a,b){
			    return b[1] - a[1];
			});

			console.log(JSON.stringify(array));

			var arrayLength = array.length;
			for (var i = 0; i < arrayLength; i++) {
			    turn += array[i][0] + " - ";
			    //Do something
			}

			turn = turn.slice(0, -3);

			if (array.length == 0) {
				turn = "Add some PCs and monsters to get started! Make sure you actually added speeds as well!"
			}

			$("#turnShower").text(turn);
		});
</script>

</html>